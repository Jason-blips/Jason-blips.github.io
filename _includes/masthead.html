{% include base_path %}

<style>
.theme-dropdown {
  position: relative;
}

.theme-dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--global-bg-color);
  border: 1px solid var(--global-border-color);
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  list-style: none;
  margin: 5px 0 0 0;
  padding: 5px 0;
  min-width: 120px;
  z-index: 1000;
}

.theme-dropdown-menu li {
  margin: 0;
  padding: 0;
}

.theme-dropdown-menu .theme-option {
  display: block;
  padding: 8px 16px;
  color: var(--global-text-color);
  text-decoration: none;
  white-space: nowrap;
  transition: background-color 0.2s;
}

.theme-dropdown-menu .theme-option:hover {
  background-color: var(--global-border-color);
}

.theme-dropdown-menu .theme-option.active {
  background-color: var(--global-border-color);
  font-weight: 600;
}

@media (max-width: 768px) {
  .theme-dropdown-menu {
    right: auto;
    left: 0;
  }
}
</style>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><span class="navicon"></span></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg persist {% if page.url == '/' or page.url == '/index.html' %}selected{% endif %}">
            <a href="{{ base_path }}/">{{ site.title }}</a>
          </li>
          {% for link in site.data.navigation.main %}
            {% if link.url contains 'http' %}
              {% assign domain = '' %}
            {% else %}
              {% assign domain = base_path %}
            {% endif %}
            <li class="masthead__menu-item {% if page.url contains link.url and link.url != '/' %}selected{% endif %}">
              <a href="{{ domain }}{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endfor %}
          <li id="theme-toggle" class="masthead__menu-item persist tail theme-dropdown">
            <a role="button" id="theme-toggle-link" title="切换主题" style="cursor: pointer; position: relative;">
              <i class="fas fa-palette" style="margin-right: 5px;"></i>
              <span id="theme-icon">auto</span>
              <i class="fas fa-chevron-down" style="margin-left: 5px; font-size: 0.8em;"></i>
            </a>
            <ul id="theme-dropdown-menu" class="theme-dropdown-menu" style="display: none;">
              <li><a href="#" data-theme="light" class="theme-option"><i class="fas fa-sun" style="margin-right: 8px;"></i>light</a></li>
              <li><a href="#" data-theme="dark" class="theme-option"><i class="fas fa-moon" style="margin-right: 8px;"></i>dark</a></li>
              <li><a href="#" data-theme="system" class="theme-option"><i class="fas fa-adjust" style="margin-right: 8px;"></i>auto</a></li>
            </ul>
          </li>
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
